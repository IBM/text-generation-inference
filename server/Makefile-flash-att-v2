#flash_att_v2_commit := https://github.com/Dao-AILab/flash-attention/commit/7f31e7c16a58227e04e0a7aed9ca0066ec8126fe
flash_att_v2_commit := v2.3.2

flash-attention-v2:
    # Clone flash attention
	pip install packaging
	git clone https://github.com/HazyResearch/flash-attention.git --branch main --single-branch flash-attention-v2

build-flash-attention-v2: flash-attention-v2
	cd flash-attention-v2 && git fetch && git checkout $(flash_att_v2_commit)
	cd flash-attention-v2 && python setup.py build

install-flash-attention-v2: build-flash-attention-v2
	cd flash-attention-v2 && python setup.py install
